# 테스트하기 좋은 코드 - 3. 외부에 의존하는 코드 개선

### 문제 상황

- 테스트 환경 구축이 어렵다.
    - 많은 리소스가 필요하게 된다.
- 외부 환경에 따라 테스트 코드의 변화의 범위가 커진다.
- 외부 상황에 따라 테스트의 결과를 다르게 반환한다.
- 실제로 느린 테스트가 되어버린다.
    - 개발자가 테스트를 꺼려하게 된다.

### 해결

- 위의 문제는 모두 외부 의존성때문에 나타나는 상황들이다.
    - 외부 의존성이 있는 코드는 따로 배치하자.
    - 외부 의존성이 있어 테스트가 어려운 코드를 따로 배치시켜서 테스트가 어려운 범위를 좁히자.
- 프론트엔드의 경우 API, 쿠키, 로컬 스토리지를 사용하는 코드와 도메인 로직을 분리시켜야 테스트가 쉬워진다.
    - `asnyc` 는 도메인 로직에 최대한 사용하지 말자. 테스트가 어려워진다 !
